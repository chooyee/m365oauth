<%if (!avatar) avatar = 'assets/images/start-trek-user-01.png'%>
<%if (!nickname) nickname = 'user'%>
<!DOCTYPE html>
<html lang="en"> <!--begin::Head-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>GIDEONE AI</title><!--begin::Primary Meta Tags-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Gideone | ChooYee.co">
    <meta name="author" content="Lee Choo Yee">
    <meta name="description" content="Annual Report viewer">
    <meta name="keywords" content="Annual report, finance, bank, pdf, maybank, public bank"><!--end::Primary Meta Tags--><!--begin::Fonts-->
    <link rel="preload" as="style" onload="this.rel = 'stylesheet'" href="https://cdn.jsdelivr.net/npm/@fontsource/source-sans-3@5.0.12/index.css" integrity="sha256-tXJfXfp6Ewt1ilPzLDtQnJV4hclT9XuaZUKyUvmyr+Q=" crossorigin="anonymous"><!--end::Fonts--><!--begin::Third Party Plugin(OverlayScrollbars)-->
    <link rel="preload" as="style" onload="this.rel = 'stylesheet'" href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.3.0/styles/overlayscrollbars.min.css" integrity="sha256-dSokZseQNT08wYEWiz5iLI8QPlKxG+TswNRD8k35cpg=" crossorigin="anonymous"><!--end::Third Party Plugin(OverlayScrollbars)--><!--begin::Third Party Plugin(Bootstrap Icons)-->
    <link rel="preload" as="style" onload="this.rel = 'stylesheet'" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.min.css" integrity="sha256-Qsx5lrStHZyR9REqhUF8iQt73X06c8LGIUPzpOhwRrI=" crossorigin="anonymous"><!--end::Third Party Plugin(Bootstrap Icons)--><!--begin::Required Plugin(AdminLTE)-->
    <link rel="preload" as="style" onload="this.rel = 'stylesheet'" href="dist/css/app.css"><!--end::Required Plugin(AdminLTE)--><!-- apexcharts -->
    <!-- <link rel="preload" as="style" onload="this.rel = 'stylesheet'" href="assets/css/style.css" /> -->
    <style>
        .loading-container {
        text-align: center;
        justify-content: center;
        display: flex;
        padding: 0.5rem;
    }

    .loading-spinner {
        border: 4px solid #eadfdf;
        border-top-color: transparent;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin-right: .5rem;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
  </style>
</head> <!--end::Head--> <!--begin::Body-->

<body class="layout-fixed sidebar-expand-lg bg-body-tertiary" data-bs-theme="dark"> <!--begin::App Wrapper-->
    <div class="loading-container">
        <div class="loading-spinner"></div>
        <p>Loading...</p>
    </div>
    <div class="app-wrapper" style="display: none;"> <!--begin::Header-->
        <nav class="app-header navbar navbar-expand bg-body"> <!--begin::Container-->
            <div class="container-fluid"> <!--begin::Start Navbar Links-->
                <ul class="navbar-nav">
                    <li class="nav-item"> <a class="nav-link" data-lte-toggle="sidebar" href="#" role="button"> <i class="bi bi-list"></i> </a> </li>
                    <li class="nav-item d-none d-md-block"> <a href="#" class="nav-link">Home</a> </li>
                    <li class="nav-item d-none d-md-block"> <a href="#" class="nav-link">Contact</a> </li>
                </ul> <!--end::Start Navbar Links--> <!--begin::End Navbar Links-->
                <ul class="navbar-nav ms-auto"> <!--begin::Navbar Search-->
                    
                    <li class="nav-item"> <a class="nav-link" href="#" data-lte-toggle="fullscreen"> <i data-lte-icon="maximize" class="bi bi-arrows-fullscreen"></i> <i data-lte-icon="minimize" class="bi bi-fullscreen-exit" style="display: none;"></i> </a> </li> <!--end::Fullscreen Toggle--> <!--begin::User Menu Dropdown-->
                    <% if (signedin) {%>
                        <li class="nav-item dropdown user-menu"> 
                            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                <img src="<%=avatar%>" class="user-image rounded-circle shadow" alt="User Image"> 
                                <span class="d-none d-md-inline" id="user-name"><%=signin_username%></span> 
                            </a>
                            <ul class="dropdown-menu dropdown-menu-lg dropdown-menu-end"> <!--begin::User Image-->
                                <li class="user-header text-bg-dark"> <img src="<%=avatar%>" class="rounded-circle shadow" alt="User Image">
                                    <p>
                                        <%=signin_username%>
                                        <small>Nickname: <%=nickname%></small>
                                    </p>
                                </li> <!--end::User Image--> <!--begin::Menu Body-->
                               
                                <li class="user-footer"> <a href="#" class="btn btn-default btn-flat">Profile</a> <a href="/logout" class="btn btn-default btn-flat float-end">Sign out</a> </li> <!--end::Menu Footer-->
                            </ul>
                        </li> <!--end::User Menu Dropdown-->
                    <%} else {%>
                        <li class="nav-item dropdown user-menu"> 
                            <a href="/login" class="nav-link"> 
                                <img src="<%=avatar%>" class="user-image rounded-circle shadow" alt="User Image"> 
                                <span class="d-none d-md-inline" id="user-name">Sign In</span> 
                            </a>
                        </li> <!--end::User Menu Dropdown-->
                    <%}%>
                </ul> <!--end::End Navbar Links-->
            </div> <!--end::Container-->
        </nav> <!--end::Header--> <!--begin::Sidebar-->
        <aside class="app-sidebar bg-body-secondary shadow sidebar-overflow" data-bs-theme="dark"> <!--begin::Sidebar Brand-->
            <div class="card-header">
                <div class="sidebar-brand card-title"> <!--begin::Brand Link--> <a href="./" class="brand-link"> <!--begin::Brand Image--> <img src="assets/images/star-wars-robot.png" alt="Gideone AI Logo" class="brand-image opacity-75 shadow"> <!--end::Brand Image--> <!--begin::Brand Text--> <span class="brand-text fw-light">Gideone AI</span> <!--end::Brand Text--> </a> <!--end::Brand Link--> </div> <!--end::Sidebar Brand--> <!--begin::Sidebar Wrapper-->
                
                <div class="card-tools"> <button type="button" class="btn btn-tool" data-lte-toggle="sidebar"> <i class="bi bi-x-lg"></i> </button> </div>
            </div>
            
            <div class="sidebar-wrapper">
                <nav class="mt-2"> <!--begin::Sidebar Menu-->
                    <ul class="nav sidebar-menu flex-column">
                        <li class="nav-item">
                            <a href="#" id="new-chat" class="nav-link"> <i class="nav-icon bi bi-plus-circle text-info"></i>
                                <p>New Chat</p>
                            </a> 
                        </li>
                    </ul>        
                    <hr>        
                    <ul class="nav list-unstyled flex-column" id="chat-history"></ul>
                    <hr>
                    <ul class="nav sidebar-menu flex-column filechatmenu">
                        <li class="nav-header">Chat with Your File</li>
                        <li class="nav-item">
                            <input type="file" id="fileInput" style="display: none;">
                            <a href="#" id="AddFileBtn" class="nav-link"> <i class="nav-icon bi bi-cloud-upload text-info"></i>
                                <p>Add New File</p>
                            </a> 
                            <div class="file-info" id="fileInfo"></div>
                            <div class="progress-container" id="progressContainer">
                                <div class="progress-bar" id="progressBar"></div>
                            </div>
                        </li>
                        <li class="nav-item">
                            <div class="multiselect">
                                <div class="selectBox" onclick="UI.toggleCheckboxes()">
                                    <select class="select-dark">
                                        <option>Select options</option>
                                    </select>
                                    <div class="overSelect"></div>
                                </div>
                                <div id="checkboxes">
                                    <!-- Checkboxes will be populated here -->
                                </div>
                            </div>
        
                            <div class="selected-items hide" id="selectedItems">
                                <div class="pill-container" id="pillContainer"></div>
                                <div class="row p-2">
                                    <div class="col-12">
                                        <a href="#" id="deleteDocs" class="nav-link send-btn form-control"> <i class="nav-icon bi bi-x-circle text-danger"></i>
                                            Delete selected document(s)
                                        </a>
                                        <!-- <button id="deleteDocs" class="send-btn form-control">
                                            Delete selected document(s)
                                        </button> -->
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>        
                   
                </nav>
            </div> <!--end::Sidebar Wrapper-->
        </aside> <!--end::Sidebar--> <!--begin::App Main-->
        <main class="app-main" data-bs-theme="dark"> <!--begin::App Content Header-->
           
            <div class="app-content" > <!--begin::Container-->
                <div class="container-fluid"> <!--begin::Row-->
                    <div class="row"> <!--begin::Col-->
                        <div id="chatdoccontainer" class="timeline"></div>
                    </div>
                </div>
                <div class="container-fluid"> <!--begin::Row-->
                    <div class="row"> <!--begin::Col-->
                        <div class="chat-content-area" id="chat-area">
                        </div>
                        <!-- <div class="row">
                            <div id="chat-progress" class="hide">
                                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 100 100">
                                                <path fill-opacity="0" stroke-width="1" stroke="#bbb" d="M81.495,13.923c-11.368-5.261-26.234-0.311-31.489,11.032C44.74,13.612,29.879,8.657,18.511,13.923  C6.402,19.539,0.613,33.883,10.175,50.804c6.792,12.04,18.826,21.111,39.831,37.379c20.993-16.268,33.033-25.344,39.819-37.379  C99.387,33.883,93.598,19.539,81.495,13.923z"/>
                                                <path id="heart-path" fill-opacity="0" stroke-width="3" stroke="#ED6A5A" d="M81.495,13.923c-11.368-5.261-26.234-0.311-31.489,11.032C44.74,13.612,29.879,8.657,18.511,13.923  C6.402,19.539,0.613,33.883,10.175,50.804c6.792,12.04,18.826,21.111,39.831,37.379c20.993-16.268,33.033-25.344,39.819-37.379  C99.387,33.883,93.598,19.539,81.495,13.923z"/>
                                            </svg>
                            </div>
                        </div> -->
                        <!-- START CHAT INPUTS -->
                        <div class="chat-input-area overflow-hidden">
                            <div class="row">
                                <div class="container mt-4 chat-inputs-area-inner">
                                    <div class="row g-2 chat-inputs-container d-flex align-items-center" style="border-radius: 25px;">

                                        <div class="col">
                                            <div id="user-prompt-div" contenteditable="true" class="editable-div"><p data-placeholder="Message ChatGPT" ><br class="ProseMirror-trailingBreak"></p></div>
                                            <textarea name="user-prompt" id="user-prompt-textarea" style="display:none"></textarea>
                                        </div>
                                        <div class="col-auto">
                                        <!-- Upload icon with hidden input -->
                                        <span class="chat-btn align-items-center cursor-pointer" id="btnSend">
                                            <i class="bi bi-send-arrow-up" id="icosend"></i>
                                            <i class="bi bi-slash-square hide" id="icoprocess"></i>
                                        </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div><!--end chat inputs-->
                    </div> <!--end::Row--> <!--begin::Row-->
                   
                </div> <!--end::Container-->
            </div> <!--end::App Content-->
        </main> <!--end::App Main--> <!--begin::Footer-->
        <footer class="app-footer"> <!--begin::To the end-->
            <div class="float-end d-none d-sm-inline">Buy me a coffee, keep the lights up!</div> <!--end::To the end--> <!--begin::Copyright--> <strong>
                Copyright &copy; 2024&nbsp;
                <a href="https://gideone.chooyee.co" class="text-decoration-none">ChooYee.Co</a>.
            </strong>
            All rights reserved.
            <!--end::Copyright-->
        </footer> <!--end::Footer-->
    </div> <!--end::App Wrapper--> <!--begin::Script--> <!--begin::Third Party Plugin(OverlayScrollbars)-->

    <div id="lair" style="display: none;">
        <div><input type="hidden" id="nickname" value="<%=nickname%>"></div>
        <div id="edit-wrapper" class="edit-wrapper hide">
            <input type="text" class="edit-input" value="${ahref.innerHTML}">
            <div class="edit-actions">
                <button class="edit-button save-button" onclick="EventHandler.saveEdit();">Save</button>
                <button class="edit-button cancel-button" onclick="EventHandler.cancelEdit();">Cancel</button>
            </div>
        </div>

        <div id="modal" style="display: none;">
            <p id="modal-message"></p>
            <button id="confirm-btn">Confirm</button>
            <button id="cancel-btn">Cancel</button>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.3.0/browser/overlayscrollbars.browser.es6.min.js" integrity="sha256-H2VM7BKda+v2Z4+DRy69uknwxjyDRhszjXFhsL4gD3w=" crossorigin="anonymous"></script> <!--end::Third Party Plugin(OverlayScrollbars)--><!--begin::Required Plugin(popperjs for Bootstrap 5)-->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha256-whL0tQWoY1Ku1iskqPFvmZ+CHsvmRWx/PIoEvIeWh4I=" crossorigin="anonymous"></script> <!--end::Required Plugin(popperjs for Bootstrap 5)--><!--begin::Required Plugin(Bootstrap 5)-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha256-YMa+wAM6QkVyz999odX7lPRxkoYAan8suedu4k2Zur8=" crossorigin="anonymous"></script> <!--end::Required Plugin(Bootstrap 5)--><!--begin::Required Plugin(AdminLTE)-->
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- <script src="dist/js/adminlte.js"></script>
	<script rel="preload" src="assets/js/main.js"> </script> -->
    <script rel="preload" src="assets/js/dist/main-min.js"> </script>
</body><!--end::Body-->

</html>